---
title: "Real Estate Analysis in the Information Age: Techniques for Big Data and Statistical Modeling"
author: "Guide to Using the Code Supplied with the Book"
date: "February 28, 2017"
output: html_document
---

The examples in this book are done in the R computing language.  All data and code are provided on this website or are downloaded free of charge from the internet.  The code for each chapter (found at XYZ.github.com) can be run to reproduce the examples and analyses that are found throughout the book.    

Before you start, you need to do two things.  

1.  Download R from <https://cran.r-project.org/bin/windows/base/> and install  
2.  Download RStudio from <https://www.rstudio.com/products/rstudio/download/.> and install.    

Note that RStudio is not necessary but it a helpful interactive development environment (IDE) that will make working with the provided R code easier.    

Once you have downloaded and installed both, you should open RStudio and see a screen like this:    

![](images/rstudiostart.jpg)

Once you have opened this can you move on to the code from the individual chapters. Do note that in many cases, code from one chapter depends on code and analyses performed in a previous chapter.  You should also set aside a directory on your computer where you can save the raw and intermediate data as well as the outputs from the graphing and modeling exercises.  You will need to manually input this directory into the code starting in chapter 4.     

## Chapter 1

No code

## Chapter 2

No code

## Chapter 3

In chapter 3, we install the necessary packages that we will use throughout this book. You can either copy the code below directly into the 'console' window of RStudio or you can open the **chp3_software.r** file and execute it in its entirety with *cntl-enter*.  If asked to choose a mirror for downloading the packages, any will do but the one closest to you is likely to be fastest.     

```{r eval=FALSE}

## Install necessary libraries

  install.packages('sf')
  install.packages('sp')  
  install.packages('maptools')
  install.packages('rgeos')
  install.packages('plyr')
  install.packages('dplyr')
  install.packages('stringr')
  install.packages('RODBC')
  install.packages('RSQLite')

```

After you have installed the above libraries you can move on to the code for chapter 4. 

## Chapter 4

In chapter 4 we gather data from a variety of sources for the two case studies that will run in parallel to this book.

## Chapter 5

```{r eval=FALSE}

  library(sf)
  library(stringr)
  library(RSQLite)

```

#### Add Parcel Centroids to Sales

We begin by reading in the parcel shapefile that we downloaded and unzipped in Chapter 4

```{r eval=FALSE}
  
  parcels <- st_read(file.path(data.dir, 'geographic/parcel_address/parcel_address.shp'),
                     quiet=TRUE)

```

This file as downloaded is in a coordinate reference system (CRS) that does not have standard latitude and longitude values.  To convert, we will transform this shapefile into a CRS that does use lat/long. 

```{r eval=FALSE }

  parcels <- st_transform(parcels, 4326)

```

We then extract the centroid values for each parcel and place then into two vectors, **longs** and **lats**.
  
```{r eval=FALSE}

  parcel.centroids <- st_centroid(parcels)
  longs <- unlist(lapply(parcel.centroids, function(x) x[1]))
  lats <- unlist(lapply(parcel.centroids, function(x) x[2]))

```  

Next, we place extract the PIN numbers, add the latitude and longitude values to it and place then in a new data.frame.  
    
```{r eval=FALSE}    
    
  parcel.xy <- data.frame(pin=parcels$PIN,
                          longitude=longs,
                          latitude=lats)

```

Finally, we attach these values to the sales.

```{r eval=FALSE}

  sales$lat <- parcel.xy$latitude[match(sales$PIN, parcel.xy$PIN)]
  sales$long <- parcel.xy$longitude[match(sales$PIN, parcel.xy$PIN)]

```



## Chapter 6

## Chapter 7

## Chapter 8

## Chapter 9

## Chapter 10

## Chapter 11

## Chapter 12

## Chapter 13

## Chapter 14

## Chapter 15




